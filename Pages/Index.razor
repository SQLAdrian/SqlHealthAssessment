<!--/* In the name of God, the Merciful, the Compassionate */-->
@page "/"

@using SqlHealthAssessment.Components.Dashboards
@using SqlHealthAssessment.Data
@inject NavigationManager Navigation
@inject UserSettingsService UserSettings
@inject DashboardConfigService DashboardConfig

@code {
    protected override void OnInitialized()
    {
        var defaultDashboardId = UserSettings.GetDefaultDashboardId();
        if (!string.IsNullOrEmpty(defaultDashboardId))
        {
            var dashboard = DashboardConfig.Config.Dashboards.FirstOrDefault(d => d.Id == defaultDashboardId && d.Enabled);
            if (dashboard != null && !string.IsNullOrEmpty(dashboard.Route))
            {
                Navigation.NavigateTo(dashboard.Route, replace: true);
                return;
            }
        }
    }
}

<RepositoryDashboard />
